<!DOCTYPE html>
<html prefix="
        og: http://ogp.me/ns# article: http://ogp.me/ns/article#
    " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Hello ASGI | Sirex web log</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../rss.xml">
<link rel="canonical" href="https://sirex.lt/posts/2018/hello-asgi/">
<!--[if lt IE 9]><script src="../../../assets/js/html5shiv-printshiv.min.js"></script><![endif]--><meta name="author" content="Sirex">
<link rel="prev" href="../../2019/penciju-fondai/" title="Pencijų fondai" type="text/html">
<link rel="next" href="../kaip-galetu-atrodyti-lietuvos-atviru-duomenu-portalas/" title="Kaip galėtų atrodyti Lietuvos atvirų duomenų portalas" type="text/html">
<meta property="og:site_name" content="Sirex web log">
<meta property="og:title" content="Hello ASGI">
<meta property="og:url" content="https://sirex.lt/posts/2018/hello-asgi/">
<meta property="og:description" content="Python programming language has WSGI (Web Server Gateway Interface) standard,
where web servers can talk to apps using same standartized protocol. Simplest
WSGI application looks like this:
import jso">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2018-03-30T00:00:00+03:00">
<meta property="article:tag" content="asgi">
<meta property="article:tag" content="python">
<meta property="article:tag" content="web">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="container">
         <main id="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name">Hello <span class="caps">ASGI</span></h1>
        <div class="metadata">
            <p class="dateline">
            <time class="published dt-published" datetime="2018-03-30T00:00:00+03:00" itemprop="datePublished" title="2018-03-30 00:00">2018-03-30 00:00</time>

                |
                <span itemprop="keywords" class="tags">
                    <a class="tag p-category" href="../../../tags/asgi/" rel="tag">asgi</a>,                    <a class="tag p-category" href="../../../tags/python/" rel="tag">python</a>,                    <a class="tag p-category" href="../../../tags/web/" rel="tag">web</a>                </span>

            </p>
        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <p>Python programming language has <a class="reference external" href="https://www.python.org/dev/peps/pep-0333/"><span class="caps">WSGI</span></a> (Web Server Gateway Interface) standard,
where web servers can talk to apps using same standartized protocol. Simplest
<span class="caps">WSGI</span> application looks like this:</p>
<div class="code"><pre class="code python"><a id="rest_code_3872a85968584ec7961896966a1d8908-1" name="rest_code_3872a85968584ec7961896966a1d8908-1" href="#rest_code_3872a85968584ec7961896966a1d8908-1"></a><span class="kn">import</span> <span class="nn">json</span>
<a id="rest_code_3872a85968584ec7961896966a1d8908-2" name="rest_code_3872a85968584ec7961896966a1d8908-2" href="#rest_code_3872a85968584ec7961896966a1d8908-2"></a>
<a id="rest_code_3872a85968584ec7961896966a1d8908-3" name="rest_code_3872a85968584ec7961896966a1d8908-3" href="#rest_code_3872a85968584ec7961896966a1d8908-3"></a><span class="k">def</span> <span class="nf">wsgi</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">start_response</span><span class="p">):</span>
<a id="rest_code_3872a85968584ec7961896966a1d8908-4" name="rest_code_3872a85968584ec7961896966a1d8908-4" href="#rest_code_3872a85968584ec7961896966a1d8908-4"></a>    <span class="n">start_response</span><span class="p">(</span><span class="s1">'200 OK'</span><span class="p">,</span> <span class="p">[</span>
<a id="rest_code_3872a85968584ec7961896966a1d8908-5" name="rest_code_3872a85968584ec7961896966a1d8908-5" href="#rest_code_3872a85968584ec7961896966a1d8908-5"></a>        <span class="p">(</span><span class="s1">'Content-Type'</span><span class="p">,</span> <span class="s1">'application/json'</span><span class="p">),</span>
<a id="rest_code_3872a85968584ec7961896966a1d8908-6" name="rest_code_3872a85968584ec7961896966a1d8908-6" href="#rest_code_3872a85968584ec7961896966a1d8908-6"></a>    <span class="p">])</span>
<a id="rest_code_3872a85968584ec7961896966a1d8908-7" name="rest_code_3872a85968584ec7961896966a1d8908-7" href="#rest_code_3872a85968584ec7961896966a1d8908-7"></a>    <span class="k">yield</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">environ</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">repr</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">()</span>
</pre></div>
<p>Response:</p>
<div class="code"><pre class="code json"><a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-1" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-1" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-1"></a><span class="p">{</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-2" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-2" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-2"></a><span class="w">  </span><span class="nt">"wsgi.errors"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;gunicorn.http.wsgi.WSGIErrorsWrapper object at 0x7fe381c1aef0&gt;"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-3" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-3" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-3"></a><span class="w">  </span><span class="nt">"wsgi.version"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">],</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-4" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-4" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-4"></a><span class="w">  </span><span class="nt">"wsgi.multithread"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-5" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-5" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-5"></a><span class="w">  </span><span class="nt">"wsgi.multiprocess"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-6" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-6" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-6"></a><span class="w">  </span><span class="nt">"wsgi.run_once"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-7" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-7" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-7"></a><span class="w">  </span><span class="nt">"wsgi.file_wrapper"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;class 'gunicorn.http.wsgi.FileWrapper'&gt;"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-8" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-8" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-8"></a><span class="w">  </span><span class="nt">"SERVER_SOFTWARE"</span><span class="p">:</span><span class="w"> </span><span class="s2">"gunicorn/19.7.1"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-9" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-9" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-9"></a><span class="w">  </span><span class="nt">"wsgi.input"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;gunicorn.http.body.Body object at 0x7fe381c1af60&gt;"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-10" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-10" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-10"></a><span class="w">  </span><span class="nt">"gunicorn.socket"</span><span class="p">:</span><span class="w"> </span><span class="s2">"&lt;socket.socket fd=9, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('127.0.0.1', 8000), raddr=('127.0.0.1', 59066)&gt;"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-11" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-11" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-11"></a><span class="w">  </span><span class="nt">"REQUEST_METHOD"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-12" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-12" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-12"></a><span class="w">  </span><span class="nt">"QUERY_STRING"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-13" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-13" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-13"></a><span class="w">  </span><span class="nt">"RAW_URI"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-14" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-14" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-14"></a><span class="w">  </span><span class="nt">"SERVER_PROTOCOL"</span><span class="p">:</span><span class="w"> </span><span class="s2">"HTTP/1.1"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-15" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-15" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-15"></a><span class="w">  </span><span class="nt">"HTTP_HOST"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localhost:8000"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-16" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-16" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-16"></a><span class="w">  </span><span class="nt">"HTTP_USER_AGENT"</span><span class="p">:</span><span class="w"> </span><span class="s2">"curl/7.59.0"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-17" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-17" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-17"></a><span class="w">  </span><span class="nt">"HTTP_ACCEPT"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*/*"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-18" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-18" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-18"></a><span class="w">  </span><span class="nt">"HTTP_CONNECTION"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Upgrade, HTTP2-Settings"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-19" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-19" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-19"></a><span class="w">  </span><span class="nt">"HTTP_UPGRADE"</span><span class="p">:</span><span class="w"> </span><span class="s2">"h2c"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-20" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-20" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-20"></a><span class="w">  </span><span class="nt">"HTTP_HTTP2_SETTINGS"</span><span class="p">:</span><span class="w"> </span><span class="s2">"AAMAAABkAARAAAAAAAIAAAAA"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-21" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-21" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-21"></a><span class="w">  </span><span class="nt">"wsgi.url_scheme"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-22" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-22" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-22"></a><span class="w">  </span><span class="nt">"REMOTE_ADDR"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-23" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-23" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-23"></a><span class="w">  </span><span class="nt">"REMOTE_PORT"</span><span class="p">:</span><span class="w"> </span><span class="s2">"59066"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-24" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-24" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-24"></a><span class="w">  </span><span class="nt">"SERVER_NAME"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-25" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-25" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-25"></a><span class="w">  </span><span class="nt">"SERVER_PORT"</span><span class="p">:</span><span class="w"> </span><span class="s2">"8000"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-26" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-26" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-26"></a><span class="w">  </span><span class="nt">"PATH_INFO"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-27" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-27" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-27"></a><span class="w">  </span><span class="nt">"SCRIPT_NAME"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="w"></span>
<a id="rest_code_8decfd3d3a9c46409aea2d6513a922c1-28" name="rest_code_8decfd3d3a9c46409aea2d6513a922c1-28" href="#rest_code_8decfd3d3a9c46409aea2d6513a922c1-28"></a><span class="p">}</span><span class="w"></span>
</pre></div>
<p>Now there is a new standard emerging, called <a class="reference external" href="https://github.com/django/asgiref/blob/master/specs/asgi.rst"><span class="caps">ASGI</span></a> (Asynchronous Server Gateway
Interface). This new standard tries to fix <span class="caps">WSGI</span> limitations and provides more
flexible interface, that can support multiple protocols like <span class="caps">HTTP</span>, <span class="caps">HTTP</span>/2,
WebSockets and others. In addition <span class="caps">ASGI</span> provides possibility to use asyncio in
web apps. Simples <span class="caps">ASGI</span> application looks like this:</p>
<div class="code"><pre class="code python"><a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-1" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-1" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-1"></a><span class="kn">import</span> <span class="nn">json</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-2" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-2" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-2"></a>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-3" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-3" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-3"></a>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-4" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-4" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-4"></a><span class="k">def</span> <span class="nf">asgi</span><span class="p">(</span><span class="n">scope</span><span class="p">):</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-5" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-5" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-5"></a>    <span class="k">async</span> <span class="k">def</span> <span class="nf">chat</span><span class="p">(</span><span class="n">receive</span><span class="p">,</span> <span class="n">send</span><span class="p">):</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-6" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-6" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-6"></a>        <span class="k">await</span> <span class="n">receive</span><span class="p">()</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-7" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-7" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-7"></a>        <span class="k">await</span> <span class="n">send</span><span class="p">({</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-8" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-8" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-8"></a>            <span class="s1">'type'</span><span class="p">:</span> <span class="s1">'http.response.start'</span><span class="p">,</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-9" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-9" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-9"></a>            <span class="s1">'status'</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-10" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-10" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-10"></a>            <span class="s1">'headers'</span><span class="p">:</span> <span class="p">[</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-11" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-11" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-11"></a>                <span class="p">[</span><span class="sa">b</span><span class="s1">'Content-Type'</span><span class="p">,</span> <span class="sa">b</span><span class="s1">'application/json'</span><span class="p">],</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-12" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-12" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-12"></a>            <span class="p">],</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-13" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-13" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-13"></a>        <span class="p">})</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-14" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-14" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-14"></a>        <span class="k">await</span> <span class="n">send</span><span class="p">({</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-15" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-15" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-15"></a>            <span class="s1">'type'</span><span class="p">:</span> <span class="s1">'http.response.body'</span><span class="p">,</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-16" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-16" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-16"></a>            <span class="s1">'body'</span><span class="p">:</span> <span class="n">json</span><span class="o">.</span><span class="n">dumps</span><span class="p">(</span><span class="n">scope</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="nb">bytes</span><span class="o">.</span><span class="n">decode</span><span class="p">)</span><span class="o">.</span><span class="n">encode</span><span class="p">(),</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-17" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-17" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-17"></a>        <span class="p">})</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-18" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-18" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-18"></a>        <span class="k">await</span> <span class="n">send</span><span class="p">({</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-19" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-19" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-19"></a>            <span class="s1">'type'</span><span class="p">:</span> <span class="s1">'http.disconnect'</span><span class="p">,</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-20" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-20" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-20"></a>        <span class="p">})</span>
<a id="rest_code_63ad999aeec0463ab792e75d6dfba54d-21" name="rest_code_63ad999aeec0463ab792e75d6dfba54d-21" href="#rest_code_63ad999aeec0463ab792e75d6dfba54d-21"></a>    <span class="k">return</span> <span class="n">chat</span>
</pre></div>
<p>Response:</p>
<div class="code"><pre class="code json"><a id="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-1" name="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-1" href="#rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-1"></a><span class="p">{</span><span class="w"></span>
<a id="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-2" name="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-2" href="#rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-2"></a><span class="w">  </span><span class="nt">"type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-3" name="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-3" href="#rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-3"></a><span class="w">  </span><span class="nt">"http_version"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-4" name="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-4" href="#rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-4"></a><span class="w">  </span><span class="nt">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-5" name="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-5" href="#rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-5"></a><span class="w">  </span><span class="nt">"path"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-6" name="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-6" href="#rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-6"></a><span class="w">  </span><span class="nt">"root_path"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-7" name="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-7" href="#rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-7"></a><span class="w">  </span><span class="nt">"scheme"</span><span class="p">:</span><span class="w"> </span><span class="s2">"https"</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-8" name="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-8" href="#rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-8"></a><span class="w">  </span><span class="nt">"query_string"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w"></span>
<a id="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-9" name="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-9" href="#rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-9"></a><span class="w">  </span><span class="nt">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w"></span>
<a id="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-10" name="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-10" href="#rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-10"></a><span class="w">    </span><span class="p">[</span><span class="s2">"host"</span><span class="p">,</span><span class="w"> </span><span class="s2">"localhost:8000"</span><span class="p">],</span><span class="w"></span>
<a id="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-11" name="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-11" href="#rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-11"></a><span class="w">    </span><span class="p">[</span><span class="s2">"user-agent"</span><span class="p">,</span><span class="w"> </span><span class="s2">"curl/7.59.0"</span><span class="p">],</span><span class="w"></span>
<a id="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-12" name="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-12" href="#rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-12"></a><span class="w">    </span><span class="p">[</span><span class="s2">"accept"</span><span class="p">,</span><span class="w"> </span><span class="s2">"*/*"</span><span class="p">]</span><span class="w"></span>
<a id="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-13" name="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-13" href="#rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-13"></a><span class="w">  </span><span class="p">],</span><span class="w"></span>
<a id="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-14" name="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-14" href="#rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-14"></a><span class="w">  </span><span class="nt">"client"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w"> </span><span class="mi">59012</span><span class="p">],</span><span class="w"></span>
<a id="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-15" name="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-15" href="#rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-15"></a><span class="w">  </span><span class="nt">"server"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w"> </span><span class="mi">8000</span><span class="p">]</span><span class="w"></span>
<a id="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-16" name="rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-16" href="#rest_code_3e8b06dfb81b477eb715dfa48f3d54c5-16"></a><span class="p">}</span><span class="w"></span>
</pre></div>
<p><span class="caps">ASGI</span> is a bit more complicated, but gives support for modern web protocols and
<em>asyncio</em>.</p>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../../2019/penciju-fondai/" rel="prev" title="Pencijų fondai">Previous post</a>
            </li>
            <li class="next">
                <a href="../kaip-galetu-atrodyti-lietuvos-atviru-duomenu-portalas/" rel="next" title="Kaip galėtų atrodyti Lietuvos atvirų duomenų portalas">Next post</a>
            </li>
        </ul></nav></aside><nav id="menu"><ul>
<li><a href="../../../">Index</a></li>
                <li><a href="../../">Archive</a></li>
                <li><a href="../../../tags/">Tags</a></li>
                <li><a href="../../../rss.xml"><span class="caps">RSS</span> feed</a></li>

    
    
    
    </ul></nav></article></main>
</div>
                <script src="../../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-N9F34JEJNF"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-N9F34JEJNF');
</script>
</body>
</html>