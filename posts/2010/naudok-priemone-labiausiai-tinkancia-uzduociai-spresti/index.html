<!DOCTYPE html>
<html prefix="
        og: http://ogp.me/ns# article: http://ogp.me/ns/article#
    " vocab="http://ogp.me/ns" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Naudok priemonę labiausiai tinkančią užduočiai spręsti | Sirex web log</title>
<link href="../../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/ipython.min.css" rel="stylesheet" type="text/css">
<link href="../../../assets/css/nikola_ipython.css" rel="stylesheet" type="text/css">
<meta name="theme-color" content="#5670d4">
<meta name="generator" content="Nikola (getnikola.com)">
<link rel="alternate" type="application/rss+xml" title="RSS" hreflang="en" href="../../../rss.xml">
<link rel="canonical" href="https://sirex.lt/posts/2010/naudok-priemone-labiausiai-tinkancia-uzduociai-spresti/">
<!--[if lt IE 9]><script src="../../../assets/js/html5shiv-printshiv.min.js"></script><![endif]--><meta name="author" content="Sirex">
<link rel="prev" href="../kaip-pateiktis-kuria-tikri-vyrai/" title="Kaip pateiktis kuria tikri vyrai!" type="text/html">
<link rel="next" href="../lietuvos-blogeriai-neabejingi-gnulinux-os/" title="Lietuvos blogeriai neabejingi GNU/Linux OS" type="text/html">
<meta property="og:site_name" content="Sirex web log">
<meta property="og:title" content="Naudok priemonę labiausiai tinkančią užduočiai spręsti">
<meta property="og:url" content="https://sirex.lt/posts/2010/naudok-priemone-labiausiai-tinkancia-uzduociai-spresti/">
<meta property="og:description" content="Kadangi esu programuotojas, mėgstu įvairias užduotis automatizuoti.  Kartais
automatizavimas sutaupo labai daug laiko, kartais galima sugaišti labai daug
laiko automatizuojant, bet šį kartą ne apie ta">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2010-06-17T07:40:00+02:00">
<meta property="article:tag" content="floss">
<meta property="article:tag" content="perl">
<meta property="article:tag" content="shell">
</head>
<body>
    <a href="#content" class="sr-only sr-only-focusable">Skip to main content</a>
    <div id="container">
         <main id="content"><article class="post-text h-entry hentry postpage" itemscope="itemscope" itemtype="http://schema.org/Article"><header><h1 class="p-name entry-title" itemprop="headline name">Naudok priemonę labiausiai tinkančią užduočiai spręsti</h1>
        <div class="metadata">
            <p class="dateline">
            <time class="published dt-published" datetime="2010-06-17T07:40:00+02:00" itemprop="datePublished" title="2010-06-17 07:40">2010-06-17 07:40</time>

                |
                <span itemprop="keywords" class="tags">
                    <a class="tag p-category" href="../../../tags/floss/" rel="tag">floss</a>,                    <a class="tag p-category" href="../../../tags/perl/" rel="tag">perl</a>,                    <a class="tag p-category" href="../../../tags/shell/" rel="tag">shell</a>                </span>

            </p>
        </div>
        
    </header><div class="e-content entry-content" itemprop="articleBody text">
    <div>
<p>Kadangi esu programuotojas, mėgstu įvairias užduotis automatizuoti.  Kartais
automatizavimas sutaupo labai daug laiko, kartais galima sugaišti labai daug
laiko automatizuojant, bet šį kartą ne apie tai…</p>
<p>Trumpai apžvelgsiu priemones, kurias naudoju užduočių automatizavimui.</p>
<div class="section" id="makefile">
<h2>Makefile<a href="#makefile" class="headerlink" title="Permalink to this heading">¶</a></h2>
<p>Labai naudinga priemonė ypač programuotojams, tačiau aš tai naudoju ne tik
programavime. Pavyzdžiui esu pasidaręs Neo Freerunner sinchronizavimą su
kompiuterių. Dažnai kataloge tiesiog aprašau Makefile, pamirštu ką jis daro ir
kam jis skirtas, bet jei matau, kad kataloge yra Makefile, tai nesigilindamas
rašau make ir darbas atliktas.</p>
<p>Tikriausiai 90% visų atviro kodo paketų naudoja Makefile, todėl įrankis tikrai
laiko ir naudotojų gausos išbandytas ir atidirbtas. Gėris.</p>
</div>
<div class="section" id="shell-skriptai">
<h2>Shell skriptai<a href="#shell-skriptai" class="headerlink" title="Permalink to this heading">¶</a></h2>
<p>Jei kažką sunkiai sekasi aprašyti Makefile’uose, į pagalbą galima
pasitelkti shell skriptus. Jei dar nežinote, tai nustebsite kiek daug
galima pasiekti naudojant shell skriptus. Mano namų bin kataloge yra
visa gausybė shell skriptų visiems gyvenimo atvejams. Šiuo metu ten yra:</p>
<pre class="literal-block">$ ls ~/bin | wc -l
65</pre>
<p>65 skriptai.</p>
<p>Štai paprastas shell skripto pavyzdys, kuris gali praversti kas dieną:</p>
<pre class="code bash"><a name="rest_code_996130df6b2d4529b1a5f3eec1b0fe05-1"></a><span class="ch">#!/bin/bash</span>
<a name="rest_code_996130df6b2d4529b1a5f3eec1b0fe05-2"></a><span class="nv">URL</span><span class="o">=</span><span class="s1">'http://translate.google.lt/translate_t?q='</span><span class="nv">$1</span><span class="s1">'#auto|lt'</span>
<a name="rest_code_996130df6b2d4529b1a5f3eec1b0fe05-3"></a>w3m -dump <span class="nv">$URL</span> <span class="m">2</span>&gt;/dev/null <span class="p">|</span> egrep <span class="s1">'^Žodynas'</span> -A10
</pre>
<p>Rezultatas gaunasi toks:</p>
<pre class="literal-block">test.sh shell
Žodynas

daiktavardis

1. apvalkalas
2. lukštas
3. karkasas
4. kiautas
5. įdėklas
6. šarvas veiksmažodis
7. sluoksnis</pre>
</div>
<div class="section" id="sed-awk-ir-draugai">
<h2>sed, awk ir draugai<a href="#sed-awk-ir-draugai" class="headerlink" title="Permalink to this heading">¶</a></h2>
<p>Rašant shell skriptus šių komandų gan dažnai prireikia, norint apdoroti
kažkokią tekstinę informaciją. Čia daug ką kalbėti ir nebūtina, tiesiog
pateiksiu paprasčiausią pavyzdį komandos, kuri pakeičia visų lentelių
pavadinimus duomenų bazės faile:</p>
<pre class="literal-block">$ du -sh data.sql
2,1G
$ sed -i data.sql
$ time sed -i 's/site1_prefix_/site2_prefix_/g' data.sql
35,27s user 51,79s system 59% cpu 2:26,58 total</pre>
<p>Visas failas pakeistas per 2,5 minutes! Įdomu per kiek laiko šį failą atidarytų
jūsų teksto redaktorius? :D</p>
</div>
<div class="section" id="perl">
<h2>perl<a href="#perl" class="headerlink" title="Permalink to this heading">¶</a></h2>
<p>Visi aukščiau išvardinti įrankiai yra puikūs, tačiau kai reikia atlikti šį tą
sudėtingesnio, visada verta prisiminti perl.</p>
<p>Perl yra pilnavertė programavimo kalba, tačiau turi funkcijų panšių į sed ir
awk, ne gana to, perl dirba labai greitai:</p>
<pre class="literal-block">$ time perl -i -nle 's/site1_prefix_/site2_prefix_/g; print' data.sql
19,60s user 9,54s system 36% cpu 1:20,46 total</pre>
<p>Perl tą patį darbą atliko minute greičiau, nei sed! Bet dirbant su perl, reikia
turėti kiek daugiau žinių, nei su sed.</p>
<p>Perl gali puikiausiai apdoroti tekstinius duomenis, o rezultatą įrašyti į
duomenų bazę ar panašiai, kaip tai padaryta šiame pavyzdyje:</p>
<pre class="code perl"><a name="rest_code_b69d92038b574465b43fdb2f26af2c2d-1"></a><span class="ch">#!/usr/bin/perl -nl</span>
<a name="rest_code_b69d92038b574465b43fdb2f26af2c2d-2"></a>
<a name="rest_code_b69d92038b574465b43fdb2f26af2c2d-3"></a><span class="k">BEGIN</span> <span class="p">{</span>
<a name="rest_code_b69d92038b574465b43fdb2f26af2c2d-4"></a>    <span class="k">use</span> <span class="nn">DBI</span><span class="p">;</span>
<a name="rest_code_b69d92038b574465b43fdb2f26af2c2d-5"></a>    <span class="k">our</span> <span class="nv">$dbh</span> <span class="o">=</span> <span class="nn">DBI</span><span class="o">-&gt;</span><span class="nb">connect</span><span class="p">(</span><span class="s">"dbi:SQLite:dbname=/tmp/lines.db"</span><span class="p">);</span>
<a name="rest_code_b69d92038b574465b43fdb2f26af2c2d-6"></a>    <span class="k">our</span> <span class="nv">$sth</span> <span class="o">=</span> <span class="nv">$dbh</span><span class="o">-&gt;</span><span class="n">prepare</span><span class="p">(</span><span class="s">"INSERT INTO lines VALUES (?)"</span><span class="p">);</span>
<a name="rest_code_b69d92038b574465b43fdb2f26af2c2d-7"></a><span class="p">}</span>
<a name="rest_code_b69d92038b574465b43fdb2f26af2c2d-8"></a>
<a name="rest_code_b69d92038b574465b43fdb2f26af2c2d-9"></a><span class="nv">$sth</span><span class="o">-&gt;</span><span class="n">execute</span><span class="p">(</span><span class="nv">$_</span><span class="p">);</span>
</pre>
</div>
</div>
    </div>
    <aside class="postpromonav"><nav><ul class="pager hidden-print">
<li class="previous">
                <a href="../kaip-pateiktis-kuria-tikri-vyrai/" rel="prev" title="Kaip pateiktis kuria tikri vyrai!">Previous post</a>
            </li>
            <li class="next">
                <a href="../lietuvos-blogeriai-neabejingi-gnulinux-os/" rel="next" title="Lietuvos blogeriai neabejingi GNU/Linux OS">Next post</a>
            </li>
        </ul></nav></aside><nav id="menu"><ul>
<li><a href="../../../">Index</a></li>
                <li><a href="../../">Archive</a></li>
                <li><a href="../../../tags/">Tags</a></li>
                <li><a href="../../../rss.xml"><span class="caps">RSS</span> feed</a></li>

    
    
    
    </ul></nav></article></main>
</div>
                <script src="../../../assets/js/all-nocdn.js"></script><script>
    baguetteBox.run('div#content', {
        ignoreClass: 'islink',
        captions: function(element) {
            return element.getElementsByTagName('img')[0].alt;
    }});
    </script><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-N9F34JEJNF"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());
  gtag('config', 'G-N9F34JEJNF');
</script>
</body>
</html>